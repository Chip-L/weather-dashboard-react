(this["webpackJsonpweather-dashboard-react"]=this["webpackJsonpweather-dashboard-react"]||[]).push([[0],{11:function(e,t,r){},13:function(e,t,r){"use strict";r.r(t);var n=r(1),i=r.n(n),c=r(5),a=r.n(c),o=(r(11),r(3)),s="GET_SEARCH_CITY",d="SET_CITY",l="SET_CITY_LIST",u="SET_WEATHER",m="SET_IS_LOADING",b="SET_ERROR",j=function(e){return{type:s,city:e}},h=function(e){return{type:d,payload:e}},g=function(){return{type:m}},p=function(e){return{type:b,payload:e}},f=r(2),y=r(6),O=function(e,t){switch(t.type){case s:return Object(f.a)(Object(f.a)({},e),{},{searchCity:t.city});case d:return Object(f.a)(Object(f.a)({},e),{},{isLoading:!1,city:t.payload});case l:return console.log("userReducer: SET_CITY_LIST:",t.cityList),Object(f.a)(Object(f.a)({},e),{},{cityList:t.cityList});case m:return Object(f.a)(Object(f.a)({},e),{},{isLoading:!0,isError:null,weather:{isSet:!1}});case u:return Object(f.a)(Object(f.a)({},e),{},{isLoading:!1,isError:null,weather:t.payload});case b:return Object(f.a)(Object(f.a)({},e),{},{isLoading:!1,isError:t.payload,weather:{isSet:!1}});default:return e}};var x=r(0),v=["value"],S=Object(n.createContext)(),w=S.Provider,C=function(e){e.value;var t,r=Object(y.a)(e,v),i=(t={city:{name:"",latitude:"",longitude:""},searchCity:"",isLoading:!1,isError:null,weather:{isSet:!1,icon:{src:"",alt:""},curTemp:null,curWindSpd:null,curHumidity:null,curUvi:null,fiveDayForecast:[]},cityList:[]},Object(n.useReducer)(O,t)),c=Object(o.a)(i,2),a=c[0],s=c[1];return Object(x.jsx)(w,Object(f.a)({value:[a,s]},r))},E=function(){return Object(n.useContext)(S)};var T=function(){var e={container:{display:"grid",gridGap:".5rem",margin:".5rem",marginTop:"1rem"},button:{fontSize:"1rem",fontWeight:400,lineHeight:"1.5rem",color:"#fff",backgroundColor:"#6c757d",border:"1px solid #6c757d",borderRadius:".25rem",marginBottom:"1rem",padding:".375rem .75rem"}},t=E(),r=Object(o.a)(t,2),i=r[0],c=i.cityList,a=i.city,s=r[1];return Object(n.useEffect)((function(){var e="weatherCityList",t=JSON.parse(localStorage.getItem(e))||[];if(console.log(t),a.name){var r=t.findIndex((function(e){return e.name===a.name}));r>-1&&t.splice(r,1),t.unshift(a),t.length>10&&(t.length=10),localStorage.setItem(e,JSON.stringify(t))}s(function(e){return{type:l,cityList:e}}(t))}),[a]),c.length?Object(x.jsx)("div",{style:e.container,children:c.map((function(t){return Object(x.jsx)("button",{onClick:function(){return s(h(t))},style:e.button,children:t.name},t.name)}))}):Object(x.jsx)("div",{})},k="feff70f8d612132ecb7ca03754f46b78",L=String.fromCharCode(176);function W(e){var t=new Date(1e3*e);return"".concat(t.getMonth()+1,"/").concat(t.getDate(),"/").concat(t.getFullYear())}var H=function(e){var t=e.forecast,r={card:{background:"#2d3e50",color:"azure",fontSize:"1rem",fontWeight:"bold",lineHeight:1.5,padding:".5rem",border:"1px solid rgba(0,0,0,.125)",borderRadius:".25rem"},img:{verticalAlign:"middle"}};return Object(x.jsxs)("div",{style:r.card,children:[Object(x.jsx)("p",{children:W(t.dt)}),Object(x.jsx)("img",{src:"https://openweathermap.org/img/wn/".concat(t.weather[0].icon,".png"),alt:t.weather[0].description,style:r.img}),Object(x.jsxs)("p",{children:["High: ",t.temp.max+L," F"]}),Object(x.jsxs)("p",{children:["Low: ",t.temp.min+L," F"]}),Object(x.jsxs)("p",{children:["Wind: ",t.wind_speed," MPH"]}),Object(x.jsxs)("p",{children:["Humidity: ",t.humidity,"%"]})]})};var z=function(){var e={div:{display:"grid",gap:"1rem",padding:"1rem",border:"1px solid black",fontSize:"1.5rem"},city:{fontSize:"2rem",fontWeight:700,marginBottom:".5rem"},img:{verticalAlign:"middle"},fdfHeading:{fontSize:"1.75rem",fontWeight:700,margin:".5rem"},fdfDiv:{display:"grid",gap:"1rem",padding:"1rem"},fdfRow:{display:"flex",justifyContent:"space-between",padding:"0 1rem"}},t=E(),r=Object(o.a)(t,2),i=r[0],c=i.city,a=i.isLoading,s=i.isError,d=i.weather,l=r[1],m=Object(n.useState)({}),b=Object(o.a)(m,2),j=b[0],h=b[1];return Object(n.useEffect)((function(){if(""!==c.name){var e="https://api.openweathermap.org/data/2.5/onecall?lat=".concat(c.latitude,"&lon=").concat(c.longitude,"&exclude=minutely,hourly&units=imperial&appid=").concat(k),t=new AbortController;l(g()),fetch(e,{signal:t.signal}).then((function(e){if(!e.ok){var t="An error has occurred: ".concat(e.status);throw new Error(t)}return e.json()})).then((function(e){console.log(e);var t={isSet:!0,icon:{src:"https://openweathermap.org/img/wn/".concat(e.current.weather[0].icon,".png"),alt:e.current.weather[0].description},curTemp:e.current.temp,curWindSpd:e.current.wind_speed,curHumidity:e.current.humidity,curUvi:e.current.uvi,asOfDate:W(e.current.dt),fiveDayForecast:e.daily.slice(1,6)};l(function(e){return{type:u,payload:e}}(t)),h(function(e){var t={borderRadius:".25rem",padding:".25rem .5rem",fontSize:"1.25rem"};return console.log(e),e<=2?(t.backgroundColor="green",t.color="azure"):e<=5?t.backgroundColor="yellow":e<=7?t.backgroundColor="orange":e<=10?(t.backgroundColor="red",t.color="azure"):(t.backgroundColor="violet",t.color="azure"),t}(t.curUvi))})).catch((function(e){l(p(e))}))}}),[c]),Object(x.jsxs)(x.Fragment,{children:[a&&Object(x.jsx)("div",{children:"Loading..."}),s&&Object(x.jsx)("div",{children:s.message}),d.isSet&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{style:e.div,children:[Object(x.jsxs)("p",{style:e.city,children:[c.name," (",d.asOfDate,")"," ",Object(x.jsx)("img",{style:e.img,src:d.icon.src,alt:d.icon.alt})]}),Object(x.jsxs)("p",{children:["Temp: ",d.curTemp+L," F"]}),Object(x.jsxs)("p",{children:["Wind: ",d.curWindSpd," MPH"]}),Object(x.jsxs)("p",{children:["Humidity: ",d.curHumidity,"%"]}),Object(x.jsxs)("p",{children:["UV Index: ",Object(x.jsx)("span",{style:j,children:d.curUvi})]})]}),Object(x.jsxs)("div",{style:e.fdfDiv,children:[Object(x.jsx)("p",{style:e.fdfHeading,children:"5 day forecast"}),Object(x.jsx)("div",{style:e.fdfRow,children:d.fiveDayForecast.map((function(e){return Object(x.jsx)(H,{forecast:e},e.dt)}))})]})]})]})},R={header:{display:"flex",justifyContent:"center",padding:".5rem .75rem",background:"linear-gradient(to right, blue, navy)",color:"azure",maxWidth:"100%"},h1:{fontSize:"2.5rem",fontWeight:500,marginBottom:".5rem"}};var I=function(){return Object(x.jsx)("header",{style:R.header,children:Object(x.jsx)("h1",{style:R.h1,children:"Weather Dashboard"})})};var _=function(){var e={container:{margin:".5rem",borderBottom:"2px solid black"},form:{display:"grid",gridGap:".5rem"},label:{fontSize:"1.75rem",fontWeight:700,marginBottom:".5rem"},input:{display:"block",padding:".375rem .75rem",fontSize:"1rem",fontWeight:400,lineHeight:1.5,border:"1px solid #ced4da",borderRadius:".25rem"},button:{background:"#5098e6",color:"#c7dfe8",marginBottom:"1rem",padding:".375rem .75rem",fontSize:"1rem",fontWeight:400,lineHeight:"1.5rem",border:"1px solid transparent",borderRadius:".25rem",transition:"color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out"}},t=E(),r=Object(o.a)(t,2),i=r[0].searchCity,c=r[1],a=Object(n.useState)(""),s=Object(o.a)(a,2),d=s[0],l=s[1];return Object(n.useEffect)((function(){if(i){var e="https://api.openweathermap.org/data/2.5/weather?q=".concat(i,"&units=imperial&appid=").concat(k),t=new AbortController;c(g()),fetch(e,{signal:t.signal}).then((function(e){if(!e.ok){var t="";throw t=404===e.status?"Unable to find ".concat(i):"An error has occurred: ".concat(e.status),new Error(t)}return e.json()})).then((function(e){var t={name:e.name,latitude:e.coord.lat,longitude:e.coord.lon};c(h(t))})).catch((function(e){c(p(e))})),c(j(""))}}),[i]),Object(x.jsx)("section",{className:"search",style:e.container,children:Object(x.jsxs)("form",{style:e.form,onSubmit:function(e){e.preventDefault(),d&&c(j(d)),l("")},children:[Object(x.jsx)("label",{style:e.label,children:"Search for a City:"}),Object(x.jsx)("input",{placeholder:"City (no state)",type:"text",style:e.input,value:d,onChange:function(e){l(e.target.value)}}),Object(x.jsx)("button",{type:"submit",style:e.button,children:"Search"})]})})},D={content:{maxWidth:"1320px",margin:"auto",padding:"1rem",display:"grid",gridTemplateColumns:"auto auto auto auto auto auto",gridGap:"1rem"},aside:{gridColumn:1},section:{gridColumn:"2 / span 5"}};var A=function(){return Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(I,{}),Object(x.jsx)(C,{children:Object(x.jsxs)("div",{className:"content",style:D.content,children:[Object(x.jsxs)("aside",{style:D.aside,children:[Object(x.jsx)(_,{}),Object(x.jsx)(T,{})]}),Object(x.jsx)("section",{style:D.section,children:Object(x.jsx)(z,{})})]})})]})};a.a.render(Object(x.jsx)(i.a.StrictMode,{children:Object(x.jsx)(A,{})}),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.0ca7da02.chunk.js.map